<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calyx &lt;/&gt; Studio | JS Obfuscator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --primary: #007bff;
      --primary-dark: #0056b3;
      --secondary: #adb5bd;
      --accent: #20c997;
      --dark: #121212;
      --darker: #1e1e1e;
      --darkest: #000;
      --light: #f8f9fa;
      --success: #28a745;
      --error: #dc3545;
      --glass: rgba(30, 30, 30, 0.7);
      --glass-border: rgba(255, 255, 255, 0.1);
      --shadow: 0 8px 32px rgba(0,0,0,0.37);
      --transition: all 0.3s ease-in-out;
    }
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    html { scroll-behavior: smooth; }
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: var(--dark);
      color: var(--light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    #particles-container {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
    }

    .watermark {
      position: fixed;
      bottom: 20px; left: 20px;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 1.3rem;
      font-weight: 600;
      color: #fff;
      z-index: 1000;
      pointer-events: none;
      letter-spacing: 0.5px;
      opacity: 0.3;
      text-shadow: 0 0 6px var(--accent);
      user-select: none;
      text-transform: none;
    }

    @keyframes fadeInDown {
      from {opacity: 0; transform: translateY(-20px);}
      to {opacity: 1; transform: translateY(0);}
    }
    @keyframes pulseGlow {
      0%, 100% { text-shadow: 0 0 10px var(--accent); opacity: 0.2; }
      50% { text-shadow: 0 0 20px var(--accent), 0 0 5px var(--accent); opacity: 0.4; }
    }
    @keyframes pulseLoader {
      0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }
      40% { transform: scale(1.2); opacity: 1; }
    }

    .page-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 50px 20px;
      position: relative;
      z-index: 1;
      width: 100%;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
      animation: fadeInDown 0.8s ease-out;
    }
    header h1 {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 3.5rem;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: 2px;
      margin-bottom: 0.5rem;
    }
    header p {
      font-size: 1.1rem;
      color: var(--secondary);
    }

    .container {
      padding: 2.5rem;
      background-color: var(--darker);
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      animation: fadeInDown 0.8s ease-out 0.2s forwards;
      opacity: 0;
    }

    .panel {
      display: flex;
      flex-direction: column;
      margin-bottom: 2rem;
    }
    .panel h2 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--light);
      border-bottom: 2px solid var(--glass-border);
      padding-bottom: 0.75rem;
      font-family: Arial, Helvetica, sans-serif;
    }

    textarea.code-textarea {
      width: 100%;
      height: 300px;
      background: var(--dark);
      color: var(--light);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      padding: 1rem;
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      resize: vertical;
      transition: all 0.3s ease;
    }
    textarea.code-textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 15px rgba(32,201,151,0.4);
    }

    .controls-panel {
      display: flex;
      flex-wrap: wrap;
      gap: 2.5rem;
      padding: 2rem;
      background-color: rgba(0,0,0,0.2);
      border-radius: 10px;
    }
    .control-group {
      flex: 1;
      min-width: 250px;
    }
    label.group-title {
      font-weight: 600;
      color: var(--accent);
      font-size: 1.1rem;
      margin-bottom: 1rem;
      display: block;
      font-family: Arial, Helvetica, sans-serif;
    }
    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
    }
    label.checkbox-label {
      display: flex;
      align-items: center;
      cursor: pointer;
      user-select: none;
      font-family: Arial, Helvetica, sans-serif;
    }
    .checkbox-label input {
      display: none;
    }
    .checkbox-custom {
      width: 22px;
      height: 22px;
      border: 2px solid var(--secondary);
      border-radius: 6px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    .checkbox-custom .check-icon {
      display: none;
      width: 14px;
      height: 14px;
      color: #fff;
    }
    .checkbox-label input:checked ~ .checkbox-custom {
      background-color: var(--accent);
      border-color: var(--accent);
    }
    .checkbox-label input:checked ~ .checkbox-custom .check-icon {
      display: block;
    }

    .actions-wrapper {
      text-align: center;
    }
    .loader-container {
      min-height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 1rem;
    }
    .dots-loader {
      display: none;
      justify-content: center;
      gap: 10px;
    }
    .dots-loader div {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: var(--accent);
      animation: pulseLoader 1.4s infinite ease-in-out both;
    }
    .dots-loader div:nth-child(1) { animation-delay: -0.32s; }
    .dots-loader div:nth-child(2) { animation-delay: -0.16s; }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
    }
    .btn {
      padding: 12px 30px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: Arial, Helvetica, sans-serif;
    }
    #obfuscate-btn {
      min-width: 250px;
      background: linear-gradient(45deg, var(--accent), var(--primary));
      color: #fff;
      box-shadow: 0 4px 15px rgba(32,201,151,0.2);
    }
    #obfuscate-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(32,201,151,0.4);
    }
    #copy-btn {
      background: var(--dark);
      color: var(--light);
      border: 1px solid var(--glass-border);
    }
    .btn:disabled {
      background: var(--secondary);
      cursor: not-allowed;
      opacity: 0.7;
      box-shadow: none;
      transform: none;
    }
    #copy-btn.copied {
      background: var(--success);
      color: #fff;
    }

    .output-panel .action-buttons {
      justify-content: flex-end;
      margin-top: 0;
      padding-top: 1rem;
      border-top: 1px solid var(--glass-border);
    }

    .site-footer-credit {
      padding: 2rem 1.5rem;
      text-align: center;
      color: var(--secondary);
      font-size: 0.9rem;
      margin-top: auto;
      font-family: Arial, Helvetica, sans-serif;
    }
    .heart {
      color: var(--error);
      display: inline-block;
      animation: pulseGlow 1.2s infinite ease-in-out;
    }
  </style>
</head>
<body>
  <canvas id="particles-container"></canvas>
  <div class="watermark">Calyx &lt;/&gt; Studio</div>

  <div class="page-wrapper">
    <header>
      <h1>JS Obfuscator</h1>
      <p>Advanced, client-side obfuscation for your code.</p>
    </header>

    <main class="container">
      <div class="panel input-panel">
        <h2>Input Code</h2>
        <textarea id="code-input" class="code-textarea" placeholder="Paste your JavaScript code here..."></textarea>
      </div>

      <div class="controls-panel">
        <div class="control-group obfuscation-options">
          <label class="group-title">Obfuscation Options</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="option-minify" checked>
              <span class="checkbox-custom"><i class="fas fa-check check-icon"></i></span>
              <span>Minify Code</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="option-rename-vars" checked>
              <span class="checkbox-custom"><i class="fas fa-check check-icon"></i></span>
              <span>Rename Variables</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="option-hex-strings" checked>
              <span class="checkbox-custom"><i class="fas fa-check check-icon"></i></span>
              <span>Hexify Strings</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="option-dead-code">
              <span class="checkbox-custom"><i class="fas fa-check check-icon"></i></span>
              <span>Inject Dead Code</span>
            </label>
          </div>
        </div>
      </div>

      <div class="actions-wrapper">
        <button id="obfuscate-btn" class="btn">Obfuscate Code</button>
        <div class="loader-container">
          <div class="dots-loader" id="loader" style="display:none;">
            <div></div><div></div><div></div>
          </div>
        </div>
      </div>

      <div class="panel output-panel">
        <h2>Obfuscated Output</h2>
        <textarea id="code-output" class="code-textarea" readonly placeholder="Your obfuscated code will appear here..."></textarea>
        <div class="action-buttons">
          <button id="copy-btn" class="btn" disabled>Copy Output</button>
        </div>
      </div>
    </main>

    <footer class="site-footer-credit">
      <p>Developed with <span class="heart">â™¥</span> by Calyx-Drey</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.3.0/tsparticles.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Load particles
      tsParticles.load({
        id: "particles-container",
        options: {
          fpsLimit: 60,
          interactivity: {
            events: {
              onHover: { enable: true, mode: "repulse" },
              onClick: { enable: true, mode: "push" }
            },
            modes: {
              repulse: { distance: 100, duration: 0.4 },
              push: { quantity: 4 }
            }
          },
          particles: {
            color: { value: "#ffffff" },
            links: { color: "#ffffff", distance: 150, enable: true, opacity: 0.1, width: 1 },
            move: { direction: "none", enable: true, outModes: "out", random: false, speed: 1, straight: false },
            number: { density: { enable: true }, value: 80 },
            opacity: { value: 0.2 },
            shape: { type: "circle" },
            size: { value: { min: 1, max: 3 } }
          },
          detectRetina: true
        }
      });

      const codeInput = document.getElementById('code-input');
      const codeOutput = document.getElementById('code-output');
      const obfuscateBtn = document.getElementById('obfuscate-btn');
      const copyBtn = document.getElementById('copy-btn');
      const loader = document.getElementById('loader');

      const options = {
        minify: document.getElementById('option-minify'),
        renameVars: document.getElementById('option-rename-vars'),
        hexStrings: document.getElementById('option-hex-strings'),
        deadCode: document.getElementById('option-dead-code'),
      };

      const minifyCode = (code) => {
        let result = code.replace(/\/\/.*$/gm, '');
        result = result.replace(/\/\*[\s\S]*?\*\//g, '');
        result = result.replace(/\s*([,;:{}[\]()=+\-*/&|!<>?])\s*/g, '$1');
        result = result.replace(/\n\s*\n/g, '\n');
        result = result.trim();
        return result;
      };

      const hexifyStrings = (code) => {
        return code.replace(/(["'`])((?:\\?.)*?)\1/g, (_,quote,content) => {
          let hexStr = '';
          for (let char of content) {
            hexStr += '\\x' + char.charCodeAt(0).toString(16).padStart(2, '0');
          }
          return quote + hexStr + quote;
        });
      };

      const renameVariables = (code) => {
        const varNames = new Set();
        const varRegex = /\b(var|let|const|function)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;
        let match;
        while ((match = varRegex.exec(code)) !== null) {
          varNames.add(match[2]);
        }
        const nameMap = new Map();
        let counter = 0;
        const generateName = () => {
          const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
          let name = '_';
          let num = counter++;
          do {
            name += chars[num % chars.length];
            num = Math.floor(num / chars.length) - 1;
          } while (num >= 0);
          return name;
        };
        varNames.forEach(oldName => {
          nameMap.set(oldName, generateName());
        });
        let obfuscatedCode = code;
        nameMap.forEach((newName, oldName) => {
          const re = new RegExp('\\b' + oldName + '\\b', 'g');
          obfuscatedCode = obfuscatedCode.replace(re, newName);
        });
        return obfuscatedCode;
      };

      const injectDeadCode = (code) => {
        const deadCodeSnippets = [
          `function _deadCode1() { var a = 1; if (a > 2) console.log('This is dead code'); }`,
          `var _deadStr = 'abc'.split('').reverse().join(''); if(_deadStr === 'cba') _deadStr = null;`,
          `var _deadFlag = (function(){ for(let i=0; i<10; i++){ if(i>20) return false;} return true; })();`
        ];
        const lines = code.split('\n');
        const idx = Math.floor(Math.random() * lines.length);
        const snippet = deadCodeSnippets[Math.floor(Math.random() * deadCodeSnippets.length)];
        lines.splice(idx, 0, snippet);
        return lines.join('\n');
      };

      const typeWriter = (element, text, callback) => {
        element.value = '';
        let i = 0;
        const interval = setInterval(() => {
          if (i < text.length) {
            element.value += text.charAt(i++);
          } else {
            clearInterval(interval);
            if (callback) callback();
          }
        }, 1);
      };

      obfuscateBtn.addEventListener('click', () => {
        let code = codeInput.value;
        if (!code.trim()) return;
        obfuscateBtn.disabled = true;
        copyBtn.disabled = true;
        loader.style.display = 'flex';
        codeOutput.value = '';
        setTimeout(() => {
          if (options.renameVars.checked) code = renameVariables(code);
          if (options.hexStrings.checked) code = hexifyStrings(code);
          if (options.deadCode.checked) code = injectDeadCode(code);
          if (options.minify.checked) code = minifyCode(code);
          loader.style.display = 'none';
          typeWriter(codeOutput, code, () => {
            obfuscateBtn.disabled = false;
            copyBtn.disabled = false;
          });
        }, 800);
      });

      copyBtn.addEventListener('click', () => {
        if (!codeOutput.value) return;
        navigator.clipboard.writeText(codeOutput.value).then(() => {
          copyBtn.textContent = 'Copied!';
          copyBtn.classList.add('copied');
          setTimeout(() => {
            copyBtn.textContent = 'Copy Output';
            copyBtn.classList.remove('copied');
          }, 2000);
        });
      });

      // Remove auto scroll button and related code - no implementation here

    });
  </script>
</body>
</html>
